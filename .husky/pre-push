echo "ğŸ” Running pre-push checks..."

# Prevent pushing directly to main
branch="$(git rev-parse --abbrev-ref HEAD)"

if [ "$branch" = "main" ]; then
  # Check if user wants to bypass (for owners/admins)
  if [ "$SKIP_PRE_PUSH" = "1" ]; then
    echo "âš ï¸  Owner bypass enabled - pushing to main (use with caution!)"
    exit 0
  fi
  
  echo "âŒ Direct pushes to 'main' branch are not allowed!"
  echo "ğŸ’¡ Please create a pull request instead."
  echo ""
  echo "ğŸ’¡ Owner bypass: SKIP_PRE_PUSH=1 git push (use with caution!)"
  exit 1
fi

echo "âœ… Pre-push checks passed!"
